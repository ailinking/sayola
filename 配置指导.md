# Sayola 葡萄牙语学习平台 - 配置指导文档

## 🎯 项目状态
✅ **已完成**：代码开发、GitHub 推送  
🔄 **待配置**：API 密钥、生产部署

---

## 📋 必要配置清单

### 1. 🔑 Google Cloud Text-to-Speech API 配置

#### 步骤 1：创建 Google Cloud 项目
1. 访问 [Google Cloud Console](https://console.cloud.google.com/)
2. 登录您的 Google 账户
3. 点击 "选择项目" → "新建项目"
4. 项目名称：`sayola-tts` 或您喜欢的名称
5. 点击 "创建"

#### 步骤 2：启用 Text-to-Speech API
1. 在项目中，转到 "API 和服务" → "库"
2. 搜索 "Cloud Text-to-Speech API"
3. 点击进入并点击 "启用"

#### 步骤 3：创建 API 密钥
1. 转到 "API 和服务" → "凭据"
2. 点击 "创建凭据" → "API 密钥"
3. 复制生成的 API 密钥
4. **重要**：点击 "限制密钥" 设置安全限制
   - 应用限制：选择 "HTTP 引荐来源网址"
   - 添加您的域名（如：`https://your-app.vercel.app/*`）
   - API 限制：选择 "Cloud Text-to-Speech API"

#### 步骤 4：本地环境配置
在项目根目录创建 `.env.local` 文件：
```bash
# 在 sayola 目录下运行
touch .env.local
```

在 `.env.local` 文件中添加：
```env
NEXT_PUBLIC_GOOGLE_CLOUD_TTS_API_KEY=你的API密钥
NEXT_PUBLIC_TTS_LANGUAGE=pt-BR
NEXT_PUBLIC_TTS_VOICE_NAME=pt-BR-Wavenet-A
```

### 2. 🚀 Vercel 部署配置

#### 步骤 1：注册 Vercel 账户
1. 访问 [vercel.com](https://vercel.com)
2. 使用 GitHub 账户登录
3. 授权 Vercel 访问您的 GitHub 仓库

#### 步骤 2：导入项目
1. 在 Vercel 仪表板点击 "New Project"
2. 找到 `ailinking/sayola` 仓库
3. 点击 "Import"
4. 项目设置：
   - **Framework Preset**: Next.js
   - **Root Directory**: `./` (默认)
   - **Build Command**: `npm run build` (默认)
   - **Output Directory**: `.next` (默认)

#### 步骤 3：配置环境变量
在 Vercel 项目设置中：
1. 转到 "Settings" → "Environment Variables"
2. 添加以下变量：
   ```
   NEXT_PUBLIC_GOOGLE_CLOUD_TTS_API_KEY = 你的API密钥
   NEXT_PUBLIC_TTS_LANGUAGE = pt-BR
   NEXT_PUBLIC_TTS_VOICE_NAME = pt-BR-Wavenet-A
   ```
3. 点击 "Save"

#### 步骤 4：部署
1. 点击 "Deploy" 开始部署
2. 等待构建完成（通常 2-3 分钟）
3. 获取您的应用 URL：`https://sayola-xxx.vercel.app`

### 3. 🔧 可选配置

#### 自定义域名（可选）
1. 在 Vercel 项目设置中转到 "Domains"
2. 添加您的自定义域名
3. 按照 DNS 配置说明设置

#### Google Analytics（可选）
在 `.env.local` 和 Vercel 环境变量中添加：
```env
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX
```

---

## 🧪 测试配置

### 本地测试
1. 确保 `.env.local` 文件配置正确
2. 重启开发服务器：
   ```bash
   npm run dev
   ```
3. 访问 `http://localhost:3000`
4. 测试音频功能：
   - 搜索一个葡萄牙语单词
   - 点击播放按钮测试 TTS

### 生产环境测试
1. 部署完成后访问 Vercel 提供的 URL
2. 测试所有功能：
   - ✅ 搜索功能
   - ✅ 音频播放
   - ✅ 单词对比
   - ✅ 每日内容
   - ✅ 用户设置

---

## 🛠️ 故障排除

### 常见问题

#### 1. API 密钥无效
**症状**：音频播放失败，控制台显示 403 错误
**解决方案**：
- 检查 API 密钥是否正确复制
- 确认 Text-to-Speech API 已启用
- 检查 API 密钥限制设置

#### 2. 音频无法播放
**症状**：点击播放按钮无反应
**解决方案**：
- 检查浏览器控制台错误信息
- 确认环境变量配置正确
- 测试网络连接

#### 3. 部署失败
**症状**：Vercel 构建失败
**解决方案**：
- 检查 GitHub 代码是否最新
- 确认 package.json 依赖完整
- 查看 Vercel 构建日志

### 调试命令
```bash
# 检查环境变量
echo $NEXT_PUBLIC_GOOGLE_CLOUD_TTS_API_KEY

# 重新构建
npm run build

# 检查 lint 错误
npm run lint
```

---

## 📊 成本估算

### Google Cloud TTS 费用
- **免费额度**：每月 100 万字符
- **付费价格**：$16.00 / 100 万字符
- **预估使用**：个人学习项目通常在免费额度内

### Vercel 托管费用
- **Hobby 计划**：免费
- **包含功能**：
  - 100GB 带宽/月
  - 无限静态网站
  - 自动 HTTPS
  - 全球 CDN

---

## 🎉 完成后的功能

配置完成后，您的 Sayola 平台将具备：

### 🔍 核心功能
- **智能搜索**：支持葡萄牙语单词查询
- **音频发音**：Google TTS 高质量语音
- **单词对比**：并排比较学习
- **每日内容**：个性化学习材料

### 🎨 用户体验
- **响应式设计**：支持手机、平板、电脑
- **主题切换**：明暗模式自由切换
- **进度跟踪**：学习历史本地保存
- **快速加载**：优化的性能表现

### 🌐 生产特性
- **SEO 优化**：搜索引擎友好
- **PWA 就绪**：可安装为应用
- **国际化**：多语言支持框架
- **安全性**：API 密钥安全管理

---

## 📞 支持与帮助

如果在配置过程中遇到问题：

1. **检查文档**：重新阅读相关步骤
2. **查看日志**：浏览器控制台和 Vercel 日志
3. **测试环境**：确认本地环境正常
4. **社区支持**：GitHub Issues 或相关技术社区

---

## 🚀 下一步计划

配置完成后，您可以考虑：

1. **功能增强**：
   - 添加更多语音选项
   - 实现用户账户系统
   - 增加学习统计功能

2. **性能优化**：
   - 实现音频缓存
   - 添加离线支持
   - 优化加载速度

3. **推广分享**：
   - 分享到社交媒体
   - 添加到个人作品集
   - 收集用户反馈

**祝您配置顺利！🎊**